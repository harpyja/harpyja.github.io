---
title: AutoGLM 部署踩坑
author: Harpyja
date: 2025-12-19
category: Jekyll
tags: [autoglm]
layout: post
mermaid: true
---

[AutoGLM][1]是一款开源的智能体操作模型 搭配官方脚本即可实现手机操作

> ##### 环境
> 控制机型：Pixel6
> 
> 工程代号：oriole
> 
> 模型服务端配置：AMD AI MAX+395,8060s,128G内存(零刻)
>
> 环境：WSL,LM-studio
>
> 目的：成功本地化部署AutoGLM官方模型并跑通手机控制

#### 同步官方代码
```shell
git clone git@github.com:zai-org/Open-AutoGLM.git
```
> ##### 注意
> 官方使用的vllm环境为非量化版本，模型大小约为20GB，如果算力不够的情况下（PS：8060s性能约为gtx4060）会非常卡顿，所以在此使用GGUF量化版本
> 量化版本链接:[https://hf-mirror.com/enacimie/AutoGLM-Phone-9B-Multilingual-Q4_K_M-GGUF][2]
> >##### 注意
> >LM-Studio中使用多模态模型需要注意：
> > >！！！！视觉模型的gguf是单独的文件！！！！
> >{: .block-danger }
> ，如果缺少[mmproj][3]视觉感知器会导致多模态无法识别图片 
> >具体的显示就是接口报错和在输入图片的时候显示此模型无法处理图片数据
> {: .block-warning }
{: .block-warning }

#### 使用前
> ##### 注意
> android16以上版本需要重新编译ADBKeyboard，推荐使用android15版本运行，并根据main.py的指示进行操作
> 工程地址：[https://github.com/senzhk/ADBKeyBoard][4]
> 下载地址：[https://github.com/senzhk/ADBKeyBoard/blob/master/ADBKeyboard.apk][5]
{: .block-warning }

#### 运行脚本
```shell
python3 main.py --base-url http://127.0.0.1:1234/v1 --model "autoglm-phone-9b"
```

> ##### TIPS
> 如果使用官方的线上模型接口则使用
> ```shell
> python3 main.py --base-url https://open.bigmodel.cn/api/paas/v4 --model "autoglm-phone" --apikey xxxxxxxxxx
> ```
{: .block-tips }

#### AutoGLM main.py 502
> ##### 注意
> 如果你正在使用clash等梯子软件 请看这里：[https://github.com/songquanpeng/one-api/issues/1897][6]
> 
> 梯子问题会导致localhost与192.168.0.0/16地址段被劫持，进而发生curl，postman等接口测试类软件好使而python请求不好使的情况
>
> 这种情况只需要把clash等代理关掉，如果不好使请重启
>
{: .block-danger }

[1]: https://github.com/zai-org/Open-AutoGLM
[2]: https://hf-mirror.com/enacimie/AutoGLM-Phone-9B-Multilingual-Q4_K_M-GGUF
[3]: https://hf-mirror.com/BlcaCola/AutoGLM-Phone-9B-GGUF/resolve/main/AutoGLM-Phone-9B-mmproj.gguf?download=true
[4]: https://github.com/senzhk/ADBKeyBoard
[5]: https://github.com/senzhk/ADBKeyBoard/blob/master/ADBKeyboard.apk
[6]: https://github.com/songquanpeng/one-api/issues/1897