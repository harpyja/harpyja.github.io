---
title: WSL网络配置踩坑
author: Harpyja
date: 2025-12-19
category: Jekyll
tags: [wsl, net]
layout: post
mermaid: true
---

WSL现已开源：[https://github.com/microsoft/WSL][1]

> ##### 环境
> 配置：AI MAX 395+ 128G，8060s
> 
> Windows版本：24H2
>
> 环境：WSL
>
> 目的：WSL配置桥接网络
>
> 原因：WSL复用windows网络会导致192.168网段ssh配置无法连接进环境

#### 思路
主要的思路就是创建虚拟交换机为以太网或者wifi网卡的共享 进而可以配置wsl使用这个虚拟网卡联网
#### 获取网卡状态
使用Get-NetAdapter命令查看当前网卡和虚拟网卡状态

```powershell
Get-NetAdapter
```

![alt text](/assets/images/getAdapter.png)


当出现up状态的以太网，WLAN等物理网卡信息的时候可以将Name记下来，后续会使用
> #####注意
> 
> 这里需要将Name完整记录下来，比如说”以太网 2“，中间的空格和2都需要保留 否则会找不到网卡
{: .block-warning}
#### 配置WSL使用的虚拟交换机
而后创建虚拟交换机,这里的{WSL-Bridge}为后续需要写入.wslconfig中的名字，这里的"以太网2"为上述Get-Adapter中获取到的物理网卡的名字
```powershell
New-VMSwitch -Name "{WSL-Bridge}" -NetAdapterName "以太网 2" -AllowManagementOS $true
```
#### 修改.wslconfig
然后修改.wslconfig
```shell
# 关键：指定使用 Hyper-V 桥接交换机
# 指定交换机名称（必须和步骤 2 中创建的名称一致，比如 WSL-Bridge）
vmSwitch=WSL-Bridge
networkingMode=bridged
```
#### 更新网络状态
然后更新wsl网络状态
```shell
wsl --shutdown
wsl
```

[1]: https://github.com/microsoft/WSL